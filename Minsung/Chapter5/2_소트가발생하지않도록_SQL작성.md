# 5.2 소트가 발생하지 않도록 SQL 작성

SQL을 작성할 때 불필요한 소트가 발생하지 않도록 주의해야합니다.

Union, Minus, Distinct는 중복 연산자를 제거하기 위해 소트 연산을 발생시키므로 꼭 필요한 경우에만 사용해야합니다.

또한 조인 방식도 잘 선택해야합니다.



## 5.2.1 Union vs. Union All

SQL에 Union을 사용하면 두 집합 간 중복을 제거하기 위해 소트 작업을 수행합니다.

반면 Union All은 중복을 확인하지 않고 두 집합을 단순히 결합하므로 소트 작업을 수행하지 않습니다.

그렇다고 해서 Union을 모두 Union All로 바꿔서는 안됩니다.

결과 집합이 달라질 수 있으므로 데이터 모델에 대한 이해가 필요합니다.



## 5.2.2 Exists 활용

중복 레코드를 제거할 목적으로 Distinct 연산자를 사용하는데, 조건에 해당하는 데이터를 모두 읽어서 중복을 제거해야 합니다.

Exists 서브쿼리를 사용하면 데이터 존재 여부만 확인하면 되기 때문에 조건절을 만족하는 데이터를 모두 읽지 않습니다.

Minus 연산자 역시도 Not Exists 서브쿼리로 변환해서 튜닝이 가능합니다.



## 5.2.3 조인 방식 변경

조인문일 때는 조인 방식도 잘 선택해줘야 합니다.

해시 조인이면 Sort Order By가 나타나는데 NL 조인으로 조인 방식을 변경하면 소트 연산을 생략할 수 있어 성능 개선이 있을 수 있습니다.

